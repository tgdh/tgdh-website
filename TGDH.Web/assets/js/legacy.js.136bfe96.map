{"version":3,"sources":["briefing-form.js"],"names":["BriefingForm","$","form","button","nav","inputSection","inputWrapper","checkTypes","radio","completeSectionShowing","_updateHiddenFieldValues","on","attr","this","_fileUpload","file","files","fileName","name","fileSize","size","ext","val","split","pop","toLowerCase","inArray","children","text","removeClass","addClass","setTimeout","_scrollTop","wWidth","hasClass","animate","scrollTop","_updateSectionHeight","resizedHeight","outerHeight","height","_focus","target","first","each","focus","_toggleSection","$this","newHeight","navigateTo","$current","$next","keypress","e","keyCode","_getCurrentSection","nextSection","_proposalButtonClick","click","thisId","_checkValidity","validElements","totalElements","sideBarSection","parent","siblings","valid","removeAttr","siblingName","targetId","parseInt","$self","_brief","currentHeight","get","length","_toggleNextButton","_checkForLocalStorage","totalFields","numberInThisSection","numberOfValidInput","trim","value","_checkNextSection","toggleTo","totalRadio","numberRadioValid","arr","type","push","is","console","log","nm","init","window","width","resize","jQuery","document","ready"],"mappings":"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","file":"legacy.js","sourcesContent":["/* eslint-disable */\nvar BriefingForm = (function ($) {\n\t'use strict';\n    // All the static variables used throughout the code.\n    var form = '.js-form',\n        button = '.js-check-validity',\n        sidebarButton = '.js-sidebar-link',\n        nav = '.c-proposal__navigation',\n        inputSection = '.c-proposal__input-section',\n        inputWrapper = '.c-proposal__input-wrapper',\n        checkTypes = 'input,textarea',\n        leftRight = '.js-navigate',\n        formSection = '.js-form-section',\n        textArea = '.c-proposal__textarea-input',\n        text = '.c-proposal__input-text',\n        email = '.c-proposal__input-email',\n        file = '.c-proposal__input-upload',\n        radio = '.c-proposal__input-radio',\n        radioLabel = '.js-radio-input',\n        completeSectionShowing = '.c-proposal__form-section.is--showing',\n        uploadBriefHeight = 300,\n        proposalTab = '.js-proposal__tabs';\n\n    // Updates hidden fields for checkboxes as umbraco adds hiddenfields that need to be toggled.\n    var _updateHiddenFieldValues = function(){\n        $('.js-checkbox--hidden-field').on('click', function(){\n            var attr = $(this).attr('for');\n            var targetTrueFalse = $(\"input[id='\"+attr+\"']\").attr('value');\n            if(targetTrueFalse === \"false\"){\n                $(\"input[id='\"+attr+\"']\").attr('value','true');\n                $(\"input[name='\"+attr+\"']\").attr('value','true');\n            }else{\n                $(\"input[id='\"+attr+\"']\").attr('value','false');\n                $(\"input[name='\"+attr+\"']\").attr('value','false');\n            }\n        });\n    };\n    // JS to check file size, type and add all elements to work with this\n    var _fileUpload = function(){\n        $('form input[type=\"file\"]').on('change focusout click keyup',function () {\n            var file = this.files[0];\n            var fileName = file.name;\n            var fileSize = file.size;\n\n            var ext = $('.c-proposal__input-upload').val().split('.').pop().toLowerCase();\n            if($.inArray(ext, ['pdf','docx']) === -1) {\n                // wrong file type\n                $('.c-proposal__file-upload-text').children('span').text(\"Only PDF (.pdf) or Word Documents (.docx) are aloud.\");\n                $('.c-proposal__replace').removeClass('is-active');\n                $('.c-proposal__input-upload').addClass('error').removeClass('valid');\n                setTimeout(function(){\n                    $(completeSectionShowing).children(nav).children(button).addClass('is--disabled');\n                },10);\n\n            }\n            else if(fileSize >= 2000000){\n                // file too large\n                $('.c-proposal__file-upload-text').children('span').text(\"Max file size is 2MB.\");\n                $('.c-proposal__replace').removeClass('is-active');\n                $('.c-proposal__input-upload').addClass('error').removeClass('valid');\n                setTimeout(function(){\n                    $(completeSectionShowing).children(nav).children(button).addClass('is--disabled');\n                },10);\n            }else{\n                // ahh just right\n                $('.js-ignore-from-validation').addClass('is--valid');\n                $('.c-proposal__file-upload-text').children('span').text(fileName+\" uploaded successfully.\");\n                $('.c-proposal__replace').addClass('is-active');\n                $(this).removeClass('error').addClass('valid');\n                setTimeout(function(){\n                    $(completeSectionShowing).children(nav).children(button).removeClass('is--disabled');\n                    $('.js-breif-id').removeClass('is--disabled-override');\n                },10);\n            }\n        });\n    };\n    // When the next / previous button is clicked the screen is scrolled.\n    var _scrollTop = function(wWidth){\n        if(wWidth >= 1000){\n            $('.js-navigate').on('click', function(){\n                if(!$(this).hasClass('is--disabled')){\n                    $('body,html').animate({scrollTop: 390}, 500);\n                }\n            });\n        }else{\n            $('.js-navigate').on('click', function(){\n                if(!$(this).hasClass('is--disabled')){\n                    $('body,html').animate({scrollTop: 275}, 500);\n                }\n            });\n        }\n    };\n    // Updates the height of the form when the screen is resized\n    var _updateSectionHeight = function(){\n        var resizedHeight = $(completeSectionShowing).outerHeight();\n        $(form).height(resizedHeight);\n\t\t/*\n        $('.c-proposal__textarea-input').on('keyup click change', function(){\n            var resizedHeight = $(completeSectionShowing).outerHeight();\n            $(form).height(resizedHeight);\n        });\n\t\t*/\n    };\n    // Check the validity of the current input / textareas on button press\n    var _focus = function(){\n        $('.js-navigate').on('click keyup', function(){\n            if(!$(this).hasClass('is--disabled')){\n                var target = $(this).attr('id');\n                setTimeout(function(){\n                    $('.c-proposal__form-section.is--showing[id=\"'+target+'\"]').first().children('.c-proposal__input-section').each(function(){\n                        $(this).children('.js--first--focus--input').first().children('input,textarea').focus();\n                    });\n                },25);\n            }\n        });\n    };\n    // Toggle animation for next / previous section\n    var _toggleSection = function(){\n        $(leftRight).on('click',function(){\n            var $this = $(this);\n            var attr = $(this).attr('id');\n            var newHeight = $('.js-form-section[id=\"'+attr+'\"]').outerHeight();\n            if(!$(this).hasClass('is--disabled')){\n                var navigateTo = $(this).attr('id');\n                $(form).animate({height: newHeight});\n                if(!$this.hasClass('navigation--left')){;\n                    var $current = $('.js-form-section.is--showing');\n                    var $next = $('.js-form-section[id=\"'+navigateTo+'\"]');\n                    $current.addClass('left');\n                    $next.addClass('right').addClass('is--showing');\n                    setTimeout(function(){\n                        $('.js-form-section[id=\"'+navigateTo+'\"]').removeClass('right');\n                        $current.removeClass('left').removeClass('is--showing');\n                    },425);\n                }else{\n                    var $current = $('.js-form-section.is--showing');\n                    var $next = $('.js-form-section[id=\"'+navigateTo+'\"]');\n                    $current.addClass('right');\n                    $next.addClass('left').addClass('is--showing');\n                    setTimeout(function(){\n                        $('.js-form-section[id=\"'+navigateTo+'\"]').removeClass('left');\n                        $current.removeClass('right').removeClass('is--showing');\n                    },425);\n                }\n            }\n        });\n        $(leftRight).keypress(function(e){\n            if(e.keyCode === 13){\n                var $this = $(this);\n                var attr = $(this).attr('id');\n                var newHeight = $('.js-form-section[id=\"'+attr+'\"]').outerHeight();\n                if(!$(this).hasClass('is--disabled')){\n                    var navigateTo = $(this).attr('id');\n                    $(form).animate({height: newHeight});\n                    $('body,html').animate({scrollTop: 390}, 500);\n                    if(!$this.hasClass('navigation--left')){;\n                        var $current = $('.js-form-section.is--showing');\n                        var $next = $('.js-form-section[id=\"'+navigateTo+'\"]');\n                        $current.addClass('left');\n                        $next.addClass('right').addClass('is--showing');\n                        setTimeout(function(){\n                            $('.js-form-section[id=\"'+navigateTo+'\"]').removeClass('right');\n                            $current.removeClass('left').removeClass('is--showing');\n                        },425);\n                    }else{\n                        var $current = $('.js-form-section.is--showing');\n                        var $next = $('.js-form-section[id=\"'+navigateTo+'\"]');\n                        $current.addClass('right');\n                        $next.addClass('left').addClass('is--showing');\n                        setTimeout(function(){\n                            $('.js-form-section[id=\"'+navigateTo+'\"]').removeClass('left');\n                            $current.removeClass('right').removeClass('is--showing');\n                        },425);\n                    }\n                }\n            }\n        });\n    };\n    // Code to show the pip for the correct section in the sidebar\n    var _getCurrentSection = function(){\n        $(leftRight).on('click', function(){\n            if(!$(this).hasClass('is--disabled')){\n                var $this = $(this),\n                    nextSection = $this.attr('data-section');\n                $(sidebarButton).removeClass('showing--pip');\n                $('.js-sidebar-link.'+nextSection).addClass('showing--pip');\n            }\n        });\n    };\n    // Proposal buttons can be found in the build your proposal section.\n    var _proposalButtonClick = function(){\n        $(proposalTab).click(function(){\n            var $this = $(this),\n                thisId = $this.attr('id'),\n                newHeight = $('.js-form-section[id=\"'+thisId+'\"]').outerHeight();\n            $('.js-form-section').removeClass('is--showing');\n            $('.js-form-section[id=\"'+thisId+'\"]').addClass('is--showing');\n            $(form).height(newHeight);\n        });\n    };\n    // Event handlers.\n    var _checkValidity = function(){\n        // Adds enter button functionality to span for back and next.\n        $(button).keypress(function(e){\n            if(e.keyCode === 13){\n                var validElements = 0;\n                var totalElements = 0;\n                var sideBarSection = $(this).attr('data-section');\n                $(this).parent(nav).siblings(inputSection).children(inputWrapper).children(checkTypes).each(function(){\n                    totalElements++;\n                    if($(this).valid()){\n                        validElements++;\n                    }\n                });\n                if(totalElements === validElements){\n                    $('.'+sideBarSection).addClass('js-active');\n                }\n            }\n        });\n        // Updates the sidebar js-active class\n        $(button).on('click',function(){\n            var validElements = 0;\n            var totalElements = 0;\n            var sideBarSection = $(this).attr('data-section');\n            $(this).parent(nav).siblings(inputSection).children(inputWrapper).children(checkTypes).each(function(){\n                totalElements++;\n                if($(this).valid()){\n                    validElements++;\n                }\n            });\n            if(totalElements === validElements){\n                $('.'+sideBarSection).addClass('js-active');\n            }\n        });\n        // Adds valid or not valid to all text inputs\n        $(text).on('focusout keyup',function(){\n            var $this = $(this);\n            if($this.valid()){\n                $this.addClass('valid');\n                $this.removeClass('not-valid');\n            }else{\n                $this.removeClass('valid');\n                $this.addClass('not-valid');\n            }\n            if($this.val()){\n                $this.addClass('valid');\n                $this.removeClass('not-valid');\n            }else{\n                $this.removeClass('valid');\n                $this.addClass('not-valid');\n            }\n        });\n        // Adds valid or not valid to all email inputs\n        $(email).on('focusout keyup',function(){\n            var $this = $(this);\n            if($this.valid()){\n                $this.addClass('valid');\n                $this.removeClass('not-valid');\n            }else{\n                $this.removeClass('valid');\n                $this.addClass('not-valid');\n            }\n            if($this.val()){\n                $this.addClass('valid');\n                $this.removeClass('not-valid');\n            }else{\n                $this.removeClass('valid');\n                $this.addClass('not-valid');\n            }\n        });\n        // Adds the valud valid or not valid to all textareas\n        $(textArea).on('focusout keyup click',function(){\n            var $this = $(this);\n            if($this.valid()){\n                $this.addClass('valid');\n                $this.removeClass('not-valid');\n            }else{\n                $this.removeClass('valid');\n                $this.addClass('not-valid');\n            }\n        });\n        // Adds valid or not valid to all file inputs\n        $(file).on('change focusout keyup',function(){\n            var $this = $(this);\n            if($this.valid()){\n                $this.addClass('valid');\n                $this.removeClass('not-valid');\n            }else{\n                $this.removeClass('valid');\n                $this.addClass('not-valid');\n            }\n        });\n        // adds valid to all radio buttons that are the same as the one clicked.\n        $(radio).on('click change keyup focusout',function(){\n            var $this = $(this);\n            var name = $this.attr('name');\n            $(completeSectionShowing).children(inputSection).children(inputWrapper).children('input[name=\"'+ name +'\"]').addClass('valid').removeAttr('required').removeClass('not-valid').attr('aria-invalid','false');\n        });\n        // adds valid to all radio buttons that are the same as the one clicked.\n        $(radioLabel).on('click change keyup focusout',function(){\n            var $this = $(this);\n            var siblingName = $this.siblings(radio).attr('name');\n            $(completeSectionShowing).children(inputSection).children(inputWrapper).children('input[name=\"'+ siblingName +'\"]').addClass('valid').removeClass('not-valid').attr('aria-invalid','false');\n        });\n        // Checks if all the sections up to the section clicked are valid, if they are it takes the user to that section.\n        $(sidebarButton).on('click',function(){\n            var $this = $(this),\n                targetId = parseInt($this.attr('id'));\n\n            $(formSection).each(function(){\n                var $self = $(this),\n                    thisId = parseInt($self.attr('id'));\n\n                if(targetId !== thisId){\n                    if(!$self.hasClass('is--valid')){\n                        return false;\n                    }\n                }\n                else{\n                    var newHeight = $('.js-form-section[id=\"'+targetId+'\"]').outerHeight();\n                    $(form).height(newHeight);\n                    $('.js-form-section').removeClass('is--showing');\n                    $(sidebarButton).removeClass('showing--pip');\n                    $this.addClass('js-active').addClass('showing--pip');\n                    $('.js-form-section[id=\"'+targetId+'\"]').addClass('is--showing');\n                    return false;\n                }\n            });\n        });\n    };\n    // Custom JS for brief upload / creation\n    var _brief = function(){\n        $('.js-create-brief').on('click', function(){\n            if($('.js-brief-upload-input').hasClass('js--showing')){\n                var currentHeight = $(form).outerHeight();\n                var newHeight = currentHeight - uploadBriefHeight;\n                $(form).height(newHeight);\n            }\n            $('.js-brief-upload-input').removeClass('js--showing').addClass('js--is-minimised');\n            $('.js-brief').attr('aria-required','false').addClass('valid');\n            $('.js-breif-id').attr('id','3').attr('data-section','js-the-brief');\n            $('.js-brief-build-back').attr('id','9');\n            $('.c-proposal__max-file-size').removeClass('is--showing');\n            $('.js-toggle-brief-required').removeAttr('required');\n            $('.js-not-required').attr('required');\n        });\n        $('.js-already-have-a-brief').on('click', function(){\n            if($('.js-brief-upload-input').hasClass('js--is-minimised')){\n                var currentHeight = $(form).outerHeight();\n                var newHeight = currentHeight + uploadBriefHeight;\n                $(form).height(newHeight);\n            }\n            $('.js-brief-upload-input').addClass('js--showing').removeClass('js--is-minimised');\n            $('.js-brief').attr('aria-required','true').removeClass('valid');\n            $('.js-breif-id').attr('id','10').attr('data-section','js-build-your-proposal');\n            $('.js-brief-build-back').attr('id','2');\n            $('.js-toggle-brief-required').attr('required');\n            $('.js-not-required').removeAttr('required');\n            setTimeout(function(){\n                $('.c-proposal__max-file-size').addClass('is--showing');\n            },250);\n            if($('.c-proposal__input-upload.js-brief').get(0).files.length === 0){\n                $('.js-breif-id').addClass('is--disabled-override');\n            }else{\n                $('.js-breif-id').removeClass('is--disabled-override');\n            }\n        });\n    };\n    // When a input or textarea is {{event}} this function is run that checks the whole section for validity. If valid - button updated\n    // THE INPUT / TEXTAREA IS CHECKED FOR THE CLASS 'valid'\n    var _toggleNextButton = function(){\n        $(checkTypes).on('click focusout keyup change keydown', function(){\n            var validElements = 0,\n                totalElements = 0;\n\n            $(completeSectionShowing).children(inputSection).children(inputWrapper).each(function(){\n                var type = $(this).children(checkTypes).attr('type');\n                // File ignored as its not always mandatory (brief can be created also)\n                if(type !== 'file'){\n                    totalElements++;\n                    if($(this).children(checkTypes).hasClass('valid')){\n                        validElements++;\n                    }\n                }\n            });\n\n            if(totalElements === validElements){\n                $(completeSectionShowing).children(nav).children(button).removeClass('is--disabled');\n                $(completeSectionShowing).addClass('is--valid');\n            }else{\n                $(completeSectionShowing).children(nav).children(button).addClass('is--disabled');\n                $(completeSectionShowing).removeClass('is--valid');\n            }\n        });\n    };\n    // JS for local storage. On click each input / textarea is checked for if it has local storage.\n    var _checkForLocalStorage = function(){\n        // Only check the is showing section initally\n        var totalFields = $(completeSectionShowing).children(inputSection).children(inputWrapper).children(checkTypes),\n        numberInThisSection = 0,\n        numberOfValidInput = 0;\n\n        setTimeout(function(){\n            $(totalFields).each(function(){\n                numberInThisSection++;\n                if(!$.trim(this.value).length) {\n                    $(this).removeClass('valid').attr('aria-invalid','true');\n                }else{\n                    $(this).addClass('valid').attr('aria-invalid','false').removeAttr('required');\n                    numberOfValidInput++;\n                }\n            });\n            if(numberInThisSection === numberOfValidInput){\n                $(completeSectionShowing).children(nav).children(button).removeClass('is--disabled');\n                $(completeSectionShowing).addClass('is--valid');\n            }else{\n                $(completeSectionShowing).children(nav).children(button).addClass('is--disabled');\n                $(completeSectionShowing).removeClass('is--valid');\n            }\n            $('input[type=\"checkbox\"]').each(function(){\n                var check = $(this).attr('checked');\n                if(check === 'checked'){\n                    var name = $(this).attr('name');\n                    $('input[name=\"'+name+'\"]').attr('value','true');\n                }\n            });\n\n        },500);\n    };\n    // Check section being toggled to on button click.\n    var _checkNextSection = function(){\n        $(button).on('click hover focusout' ,function(){\n            var $this = $(this),\n                toggleTo = $this.attr('id'),\n                totalElements = 0,\n                totalRadio = 0,\n                numberRadioValid = 0,\n                numberOfValidInput = 0,\n                arr = [];\n            $('.js-form-section[id=\"'+toggleTo+'\"]').children(inputSection).each(function(){\n                var $self = $(this);\n\n                $self.children(inputWrapper).each(function(){\n                    var parent = $(this).children(checkTypes),\n                        type = parent.attr('type'),\n                        name = parent.attr('name'),\n                        value = parent.val();\n                    // ! radio or file or checkbox\n                    if(type !== 'radio' && type !== 'file' && type !== 'checkbox'){\n                        totalElements++;\n                        if(value !== ''){\n                            numberOfValidInput++;\n                            $(parent).addClass('valid').attr('aria-invalid','false').removeAttr('required');\n                        }else{\n                            $(parent).removeClass('valid').attr('aria-invalid','true');\n                        }\n                    }\n                    // radio only\n                    else if(type === 'radio'){\n                        // to stop both values being equal to 0 which will enable the button.\n                        totalElements = 9999;\n                        if($.inArray(name, arr) < 0){\n                            arr.push(name);\n                            totalRadio = arr.length;\n                        }\n                        if(parent.is(':checked')){\n                            numberRadioValid++;\n                            $('.c-proposal__input-radio[name=\"'+name+'\"]').addClass('valid').attr('aria-required','false').removeAttr('required').attr('aria-invalid','false');\n                        }\n                    }\n                    // checkbox only\n                    else if(type === 'checkbox'){\n                        console.log('test');\n                        setTimeout(function(){\n                            var chk = parent.attr('checked');\n                            if(chk === 'checked'){\n                                var nm = parent.attr('name');\n                                console.log(nm);\n                                $('input[name=\"'+nm+'\"]').attr('value','true');\n                            }\n                        },500);\n                    }\n                });\n                if(totalElements === numberOfValidInput){\n                    $('.js-form-section[id=\"'+toggleTo+'\"]').children(nav).children(button).removeClass('is--disabled');\n                }\n                if(totalRadio === numberRadioValid){\n                    $('.js-form-section[id=\"'+toggleTo+'\"]').children(nav).children('.js-radio-button').removeClass('is--disabled');\n                }\n            });\n        });\n    };\n\n    // Function calls\n    var init = function() {\n        var wWidth = $(window).width();\n\t\t$(window).resize(function(){\n            var wWidth = $(this).width();\n            _updateSectionHeight();\n            _scrollTop(wWidth);\n\t\t});\n        _updateSectionHeight();\n        _checkForLocalStorage();\n        _checkNextSection();\n        _focus();\n        _getCurrentSection();\n        _scrollTop(wWidth);\n        _fileUpload();\n        _checkValidity();\n        _toggleSection();\n        _toggleNextButton();\n        _brief();\n        _proposalButtonClick();\n        _updateHiddenFieldValues();\n\t};\n\n    return {\n\t\tinit: init\n\t};\n\n})(jQuery);\n/* eslint-enable */\n"]}