var BriefingForm=function(i){"use strict";var s=".js-form",a=".js-check-validity",e=".c-proposal__navigation",t=".c-proposal__input-section",o=".c-proposal__input-wrapper",r="input,textarea",l=".c-proposal__input-radio",n=".c-proposal__form-section.is--showing",d=function(){i(".js-checkbox--hidden-field").on("click",function(){var s=i(this).attr("for");"false"===i("input[id='"+s+"']").attr("value")?(i("input[id='"+s+"']").attr("value","true"),i("input[name='"+s+"']").attr("value","true")):(i("input[id='"+s+"']").attr("value","false"),i("input[name='"+s+"']").attr("value","false"))})},c=function(){i('form input[type="file"]').on("change focusout click keyup",function(){var s=this.files[0],t=s.name,o=s.size,r=i(".c-proposal__input-upload").val().split(".").pop().toLowerCase();-1===i.inArray(r,["pdf","docx"])?(i(".c-proposal__file-upload-text").children("span").text("Only PDF (.pdf) or Word Documents (.docx) are aloud."),i(".c-proposal__replace").removeClass("is-active"),i(".c-proposal__input-upload").addClass("error").removeClass("valid"),setTimeout(function(){i(n).children(e).children(a).addClass("is--disabled")},10)):o>=2e6?(i(".c-proposal__file-upload-text").children("span").text("Max file size is 2MB."),i(".c-proposal__replace").removeClass("is-active"),i(".c-proposal__input-upload").addClass("error").removeClass("valid"),setTimeout(function(){i(n).children(e).children(a).addClass("is--disabled")},10)):(i(".js-ignore-from-validation").addClass("is--valid"),i(".c-proposal__file-upload-text").children("span").text(t+" uploaded successfully."),i(".c-proposal__replace").addClass("is-active"),i(this).removeClass("error").addClass("valid"),setTimeout(function(){i(n).children(e).children(a).removeClass("is--disabled"),i(".js-breif-id").removeClass("is--disabled-override")},10))})},u=function(s){s>=1e3?i(".js-navigate").on("click",function(){i(this).hasClass("is--disabled")||i("body,html").animate({scrollTop:390},500)}):i(".js-navigate").on("click",function(){i(this).hasClass("is--disabled")||i("body,html").animate({scrollTop:275},500)})},h=function(){var a=i(n).outerHeight();i(s).height(a)},v=function(){i(".js-navigate").on("click keyup",function(){if(!i(this).hasClass("is--disabled")){var s=i(this).attr("id");setTimeout(function(){i('.c-proposal__form-section.is--showing[id="'+s+'"]').first().children(".c-proposal__input-section").each(function(){i(this).children(".js--first--focus--input").first().children("input,textarea").focus()})},25)}})},f=function(){i(".js-navigate").on("click",function(){var a=i(this),e=i(this).attr("id"),t=i('.js-form-section[id="'+e+'"]').outerHeight();if(!i(this).hasClass("is--disabled")){var o=i(this).attr("id");if(i(s).animate({height:t}),a.hasClass("navigation--left")){var r=i(".js-form-section.is--showing"),l=i('.js-form-section[id="'+o+'"]');r.addClass("right"),l.addClass("left").addClass("is--showing"),setTimeout(function(){i('.js-form-section[id="'+o+'"]').removeClass("left"),r.removeClass("right").removeClass("is--showing")},425)}else{var r=i(".js-form-section.is--showing"),l=i('.js-form-section[id="'+o+'"]');r.addClass("left"),l.addClass("right").addClass("is--showing"),setTimeout(function(){i('.js-form-section[id="'+o+'"]').removeClass("right"),r.removeClass("left").removeClass("is--showing")},425)}}}),i(".js-navigate").keypress(function(a){if(13===a.keyCode){var e=i(this),t=i(this).attr("id"),o=i('.js-form-section[id="'+t+'"]').outerHeight();if(!i(this).hasClass("is--disabled")){var r=i(this).attr("id");if(i(s).animate({height:o}),i("body,html").animate({scrollTop:390},500),e.hasClass("navigation--left")){var l=i(".js-form-section.is--showing"),n=i('.js-form-section[id="'+r+'"]');l.addClass("right"),n.addClass("left").addClass("is--showing"),setTimeout(function(){i('.js-form-section[id="'+r+'"]').removeClass("left"),l.removeClass("right").removeClass("is--showing")},425)}else{var l=i(".js-form-section.is--showing"),n=i('.js-form-section[id="'+r+'"]');l.addClass("left"),n.addClass("right").addClass("is--showing"),setTimeout(function(){i('.js-form-section[id="'+r+'"]').removeClass("right"),l.removeClass("left").removeClass("is--showing")},425)}}}})},p=function(){i(".js-navigate").on("click",function(){if(!i(this).hasClass("is--disabled")){var s=i(this),a=s.attr("data-section");i(".js-sidebar-link").removeClass("showing--pip"),i(".js-sidebar-link."+a).addClass("showing--pip")}})},m=function(){i(".js-proposal__tabs").click(function(){var a=i(this),e=a.attr("id"),t=i('.js-form-section[id="'+e+'"]').outerHeight();i(".js-form-section").removeClass("is--showing"),i('.js-form-section[id="'+e+'"]').addClass("is--showing"),i(s).height(t)})},C=function(){i(a).keypress(function(s){if(13===s.keyCode){var a=0,l=0,n=i(this).attr("data-section");i(this).parent(e).siblings(t).children(o).children(r).each(function(){l++,i(this).valid()&&a++}),l===a&&i("."+n).addClass("js-active")}}),i(a).on("click",function(){var s=0,a=0,l=i(this).attr("data-section");i(this).parent(e).siblings(t).children(o).children(r).each(function(){a++,i(this).valid()&&s++}),a===s&&i("."+l).addClass("js-active")}),i(".c-proposal__input-text").on("focusout keyup",function(){var s=i(this);s.valid()?(s.addClass("valid"),s.removeClass("not-valid")):(s.removeClass("valid"),s.addClass("not-valid")),s.val()?(s.addClass("valid"),s.removeClass("not-valid")):(s.removeClass("valid"),s.addClass("not-valid"))}),i(".c-proposal__input-email").on("focusout keyup",function(){var s=i(this);s.valid()?(s.addClass("valid"),s.removeClass("not-valid")):(s.removeClass("valid"),s.addClass("not-valid")),s.val()?(s.addClass("valid"),s.removeClass("not-valid")):(s.removeClass("valid"),s.addClass("not-valid"))}),i(".c-proposal__textarea-input").on("focusout keyup click",function(){var s=i(this);s.valid()?(s.addClass("valid"),s.removeClass("not-valid")):(s.removeClass("valid"),s.addClass("not-valid"))}),i(".c-proposal__input-upload").on("change focusout keyup",function(){var s=i(this);s.valid()?(s.addClass("valid"),s.removeClass("not-valid")):(s.removeClass("valid"),s.addClass("not-valid"))}),i(l).on("click change keyup focusout",function(){var s=i(this),a=s.attr("name");i(n).children(t).children(o).children('input[name="'+a+'"]').addClass("valid").removeAttr("required").removeClass("not-valid").attr("aria-invalid","false")}),i(".js-radio-input").on("click change keyup focusout",function(){var s=i(this),a=s.siblings(l).attr("name");i(n).children(t).children(o).children('input[name="'+a+'"]').addClass("valid").removeClass("not-valid").attr("aria-invalid","false")}),i(".js-sidebar-link").on("click",function(){var a=i(this),e=parseInt(a.attr("id"));i(".js-form-section").each(function(){var t=i(this),o=parseInt(t.attr("id"));if(e===o){var r=i('.js-form-section[id="'+e+'"]').outerHeight();return i(s).height(r),i(".js-form-section").removeClass("is--showing"),i(".js-sidebar-link").removeClass("showing--pip"),a.addClass("js-active").addClass("showing--pip"),i('.js-form-section[id="'+e+'"]').addClass("is--showing"),!1}if(!t.hasClass("is--valid"))return!1})})},g=function(){i(".js-create-brief").on("click",function(){if(i(".js-brief-upload-input").hasClass("js--showing")){var a=i(s).outerHeight(),e=a-300;i(s).height(e)}i(".js-brief-upload-input").removeClass("js--showing").addClass("js--is-minimised"),i(".js-brief").attr("aria-required","false").addClass("valid"),i(".js-breif-id").attr("id","3").attr("data-section","js-the-brief"),i(".js-brief-build-back").attr("id","9"),i(".c-proposal__max-file-size").removeClass("is--showing"),i(".js-toggle-brief-required").removeAttr("required"),i(".js-not-required").attr("required")}),i(".js-already-have-a-brief").on("click",function(){if(i(".js-brief-upload-input").hasClass("js--is-minimised")){var a=i(s).outerHeight(),e=a+300;i(s).height(e)}i(".js-brief-upload-input").addClass("js--showing").removeClass("js--is-minimised"),i(".js-brief").attr("aria-required","true").removeClass("valid"),i(".js-breif-id").attr("id","10").attr("data-section","js-build-your-proposal"),i(".js-brief-build-back").attr("id","2"),i(".js-toggle-brief-required").attr("required"),i(".js-not-required").removeAttr("required"),setTimeout(function(){i(".c-proposal__max-file-size").addClass("is--showing")},250),0===i(".c-proposal__input-upload.js-brief").get(0).files.length?i(".js-breif-id").addClass("is--disabled-override"):i(".js-breif-id").removeClass("is--disabled-override")})},j=function(){i(r).on("click focusout keyup change keydown",function(){var s=0,l=0;i(n).children(t).children(o).each(function(){"file"!==i(this).children(r).attr("type")&&(l++,i(this).children(r).hasClass("valid")&&s++)}),l===s?(i(n).children(e).children(a).removeClass("is--disabled"),i(n).addClass("is--valid")):(i(n).children(e).children(a).addClass("is--disabled"),i(n).removeClass("is--valid"))})},b=function(){var s=i(n).children(t).children(o).children(r),l=0,d=0;setTimeout(function(){i(s).each(function(){l++,i.trim(this.value).length?(i(this).addClass("valid").attr("aria-invalid","false").removeAttr("required"),d++):i(this).removeClass("valid").attr("aria-invalid","true")}),l===d?(i(n).children(e).children(a).removeClass("is--disabled"),i(n).addClass("is--valid")):(i(n).children(e).children(a).addClass("is--disabled"),i(n).removeClass("is--valid")),i('input[type="checkbox"]').each(function(){if("checked"===i(this).attr("checked")){var s=i(this).attr("name");i('input[name="'+s+'"]').attr("value","true")}})},500)},_=function(){i(a).on("click hover focusout",function(){var s=i(this),l=s.attr("id"),n=0,d=0,c=0,u=0,h=[];i('.js-form-section[id="'+l+'"]').children(t).each(function(){i(this).children(o).each(function(){var s=i(this).children(r),a=s.attr("type"),e=s.attr("name"),t=s.val();"radio"!==a&&"file"!==a&&"checkbox"!==a?(n++,""!==t?(u++,i(s).addClass("valid").attr("aria-invalid","false").removeAttr("required")):i(s).removeClass("valid").attr("aria-invalid","true")):"radio"===a?(n=9999,i.inArray(e,h)<0&&(h.push(e),d=h.length),s.is(":checked")&&(c++,i('.c-proposal__input-radio[name="'+e+'"]').addClass("valid").attr("aria-required","false").removeAttr("required").attr("aria-invalid","false"))):"checkbox"===a&&(console.log("test"),setTimeout(function(){if("checked"===s.attr("checked")){var a=s.attr("name");console.log(a),i('input[name="'+a+'"]').attr("value","true")}},500))}),n===u&&i('.js-form-section[id="'+l+'"]').children(e).children(a).removeClass("is--disabled"),d===c&&i('.js-form-section[id="'+l+'"]').children(e).children(".js-radio-button").removeClass("is--disabled")})})};return{init:function(){var s=i(window).width();i(window).resize(function(){var s=i(this).width();h(),u(s)}),h(),b(),_(),v(),p(),u(s),c(),C(),f(),j(),g(),m(),d()}}}(jQuery);!function(i){i(document).ready(function(){})}(jQuery);
//# sourceMappingURL=legacy.js.map
